{"version":3,"sources":["modules/fancybox.js"],"names":["window","document","$","undefined","H","W","D","F","fancybox","open","apply","arguments","IE","navigator","userAgent","match","didUpdate","isTouch","createTouch","isQuery","obj","hasOwnProperty","isString","str","type","isPercentage","indexOf","isScrollable","el","style","overflow","clientWidth","scrollWidth","clientHeight","scrollHeight","getScalar","orig","dim","value","parseInt","getViewport","Math","ceil","getValue","extend","version","defaults","padding","margin","width","height","minWidth","minHeight","maxWidth","maxHeight","pixelRatio","autoSize","autoHeight","autoWidth","autoResize","autoCenter","fitToView","aspectRatio","topRatio","leftRatio","scrolling","wrapCSS","arrows","closeBtn","closeClick","nextClick","mouseWheel","autoPlay","playSpeed","preload","modal","loop","ajax","dataType","headers","iframe","swf","wmode","allowfullscreen","allowscriptaccess","keys","next","prev","close","play","toggle","direction","scrollOutside","index","href","content","title","tpl","wrap","image","error","loading","openEffect","openSpeed","openEasing","openOpacity","openMethod","closeEffect","closeSpeed","closeEasing","closeOpacity","closeMethod","nextEffect","nextSpeed","nextEasing","nextMethod","prevEffect","prevSpeed","prevEasing","prevMethod","helpers","overlay","onCancel","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeChange","beforeClose","afterClose","group","opts","previous","coming","current","isActive","isOpen","isOpened","skin","outer","inner","player","timer","ajaxLoad","imgPreload","transitions","isPlainObject","isArray","get","each","i","element","rez","hrefParts","selector","nodeType","data","attr","text","html","isDom","metadata","prop","isImage","isSWF","charAt","split","shift","replace","_start","cancel","trigger","hideLoading","abort","onload","onerror","stop","remove","_afterZoomOut","event","unbindEvents","isClosing","removeClass","action","clear","clearTimeout","set","setTimeout","unbind","start","length","bind","jumpto","router","reposition","e","onlyAbsolute","pos","_getPosition","position","animate","css","update","originalEvent","anyway","_setDimension","canShrink","removeAttr","addClass","showLoading","viewport","click","appendTo","which","keyCode","preventDefault","fixed","top","h","y","left","w","x","locked","scrollLeft","scrollTop","innerWidth","innerHeight","bindEvents","code","target","srcElement","ctrlKey","altKey","shiftKey","metaKey","is","val","inArray","fn","mousewheel","delta","deltaX","deltaY","parent","canScroll","o","ret","isFunction","Array","prototype","slice","call","helper","v","_error","_loadImage","_loadAjax","_loadIframe","_afterLoad","hasError","img","Image","src","complete","url","jqXHR","textStatus","success","Date","getTime","find","hide","end","empty","one","parents","show","_preloadImages","len","cnt","min","item","placeholder","embed","insertAfter","detach","replaceAll","name","append","not","steps","canExpand","scrollOut","scrollbarWidth","wMargin","hMargin","wPadding","hPadding","wSpace","hSpace","origWidth","origHeight","origMaxWidth","origMaxHeight","ratio","width_","height_","maxWidth_","maxHeight_","body","add","outerWidth","outerHeight","contentWindow","location","contents","max","wrapSpace","skinSpace","_afterZoomIn","getOrigPosition","offset","step","now","fx","zoomIn","startPos","effect","elastic","endPos","opacity","duration","easing","zoomOut","changeIn","distance","field","changeOut","speedOut","showEarly","create","that","proxy","hasClass","scrollV","scrollH","offsetWidth","documentElement","onReady","fixPosition","filter","onUpdate","fadeOut","trim","wrapInner","abs","options","run","what","blur","idx","relType","relVal","groupAttr","live","undelegate","delegate","ready","w1","w2","child","children","support","fixedPosition","elem","offsetTop","jQuery"],"mappings":"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","file":"fancybox.604d8017.js","sourceRoot":"../app/scripts","sourcesContent":["/*!\n * fancyBox - jQuery Plugin\n * version: 2.1.5 (Fri, 14 Jun 2013)\n * requires jQuery v1.6 or later\n *\n * Examples at http://fancyapps.com/fancybox/\n * License: www.fancyapps.com/fancybox/#license\n *\n * Copyright 2012 Janis Skarnelis - janis@fancyapps.com\n *\n */\n\n;(function (window, document, $, undefined) {\n\t\"use strict\";\n\n\tvar H = $(\"html\"),\n\t\tW = $(window),\n\t\tD = $(document),\n\t\tF = $.fancybox = function () {\n\t\t\tF.open.apply( this, arguments );\n\t\t},\n\t\tIE =  navigator.userAgent.match(/msie/i),\n\t\tdidUpdate\t= null,\n\t\tisTouch\t\t= document.createTouch !== undefined,\n\n\t\tisQuery\t= function(obj) {\n\t\t\treturn obj && obj.hasOwnProperty && obj instanceof $;\n\t\t},\n\t\tisString = function(str) {\n\t\t\treturn str && $.type(str) === \"string\";\n\t\t},\n\t\tisPercentage = function(str) {\n\t\t\treturn isString(str) && str.indexOf('%') > 0;\n\t\t},\n\t\tisScrollable = function(el) {\n\t\t\treturn (el && !(el.style.overflow && el.style.overflow === 'hidden') && ((el.clientWidth && el.scrollWidth > el.clientWidth) || (el.clientHeight && el.scrollHeight > el.clientHeight)));\n\t\t},\n\t\tgetScalar = function(orig, dim) {\n\t\t\tvar value = parseInt(orig, 10) || 0;\n\n\t\t\tif (dim && isPercentage(orig)) {\n\t\t\t\tvalue = F.getViewport()[ dim ] / 100 * value;\n\t\t\t}\n\n\t\t\treturn Math.ceil(value);\n\t\t},\n\t\tgetValue = function(value, dim) {\n\t\t\treturn getScalar(value, dim) + 'px';\n\t\t};\n\n\t$.extend(F, {\n\t\t// The current version of fancyBox\n\t\tversion: '2.1.5',\n\n\t\tdefaults: {\n\t\t\tpadding : 15,\n\t\t\tmargin  : 20,\n\n\t\t\twidth     : 800,\n\t\t\theight    : 600,\n\t\t\tminWidth  : 100,\n\t\t\tminHeight : 100,\n\t\t\tmaxWidth  : 9999,\n\t\t\tmaxHeight : 9999,\n\t\t\tpixelRatio: 1, // Set to 2 for retina display support\n\n\t\t\tautoSize   : true,\n\t\t\tautoHeight : false,\n\t\t\tautoWidth  : false,\n\n\t\t\tautoResize  : true,\n\t\t\tautoCenter  : !isTouch,\n\t\t\tfitToView   : true,\n\t\t\taspectRatio : false,\n\t\t\ttopRatio    : 0.5,\n\t\t\tleftRatio   : 0.5,\n\n\t\t\tscrolling : 'auto', // 'auto', 'yes' or 'no'\n\t\t\twrapCSS   : '',\n\n\t\t\tarrows     : true,\n\t\t\tcloseBtn   : true,\n\t\t\tcloseClick : false,\n\t\t\tnextClick  : false,\n\t\t\tmouseWheel : true,\n\t\t\tautoPlay   : false,\n\t\t\tplaySpeed  : 3000,\n\t\t\tpreload    : 3,\n\t\t\tmodal      : false,\n\t\t\tloop       : true,\n\n\t\t\tajax  : {\n\t\t\t\tdataType : 'html',\n\t\t\t\theaders  : { 'X-fancyBox': true }\n\t\t\t},\n\t\t\tiframe : {\n\t\t\t\tscrolling : 'auto',\n\t\t\t\tpreload   : true\n\t\t\t},\n\t\t\tswf : {\n\t\t\t\twmode: 'transparent',\n\t\t\t\tallowfullscreen   : 'true',\n\t\t\t\tallowscriptaccess : 'always'\n\t\t\t},\n\n\t\t\tkeys  : {\n\t\t\t\tnext : {\n\t\t\t\t\t13 : 'left', // enter\n\t\t\t\t\t34 : 'up',   // page down\n\t\t\t\t\t39 : 'left', // right arrow\n\t\t\t\t\t40 : 'up'    // down arrow\n\t\t\t\t},\n\t\t\t\tprev : {\n\t\t\t\t\t8  : 'right',  // backspace\n\t\t\t\t\t33 : 'down',   // page up\n\t\t\t\t\t37 : 'right',  // left arrow\n\t\t\t\t\t38 : 'down'    // up arrow\n\t\t\t\t},\n\t\t\t\tclose  : [27], // escape key\n\t\t\t\tplay   : [32], // space - start/stop slideshow\n\t\t\t\ttoggle : [70]  // letter \"f\" - toggle fullscreen\n\t\t\t},\n\n\t\t\tdirection : {\n\t\t\t\tnext : 'left',\n\t\t\t\tprev : 'right'\n\t\t\t},\n\n\t\t\tscrollOutside  : true,\n\n\t\t\t// Override some properties\n\t\t\tindex   : 0,\n\t\t\ttype    : null,\n\t\t\thref    : null,\n\t\t\tcontent : null,\n\t\t\ttitle   : null,\n\n\t\t\t// HTML templates\n\t\t\ttpl: {\n\t\t\t\twrap     : '<div class=\"fancybox-wrap\" tabIndex=\"-1\"><div class=\"fancybox-skin\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner\"></div></div></div></div>',\n\t\t\t\timage    : '<img class=\"fancybox-image\" src=\"{href}\" alt=\"\" />',\n\t\t\t\tiframe   : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (IE ? ' allowtransparency=\"true\"' : '') + '></iframe>',\n\t\t\t\terror    : '<p class=\"fancybox-error\">The requested content cannot be loaded.<br/>Please try again later.</p>',\n\t\t\t\tcloseBtn : '<a title=\"Close\" class=\"fancybox-item fancybox-close\" href=\"javascript:;\"></a>',\n\t\t\t\tnext     : '<a title=\"Next\" class=\"fancybox-nav fancybox-next\" href=\"javascript:;\"><span></span></a>',\n\t\t\t\tprev     : '<a title=\"Previous\" class=\"fancybox-nav fancybox-prev\" href=\"javascript:;\"><span></span></a>',\n\t\t\t\tloading  : '<div id=\"fancybox-loading\"><div></div></div>'\n\t\t\t},\n\n\t\t\t// Properties for each animation type\n\t\t\t// Opening fancyBox\n\t\t\topenEffect  : 'fade', // 'elastic', 'fade' or 'none'\n\t\t\topenSpeed   : 250,\n\t\t\topenEasing  : 'swing',\n\t\t\topenOpacity : true,\n\t\t\topenMethod  : 'zoomIn',\n\n\t\t\t// Closing fancyBox\n\t\t\tcloseEffect  : 'fade', // 'elastic', 'fade' or 'none'\n\t\t\tcloseSpeed   : 250,\n\t\t\tcloseEasing  : 'swing',\n\t\t\tcloseOpacity : true,\n\t\t\tcloseMethod  : 'zoomOut',\n\n\t\t\t// Changing next gallery item\n\t\t\tnextEffect : 'elastic', // 'elastic', 'fade' or 'none'\n\t\t\tnextSpeed  : 250,\n\t\t\tnextEasing : 'swing',\n\t\t\tnextMethod : 'changeIn',\n\n\t\t\t// Changing previous gallery item\n\t\t\tprevEffect : 'elastic', // 'elastic', 'fade' or 'none'\n\t\t\tprevSpeed  : 250,\n\t\t\tprevEasing : 'swing',\n\t\t\tprevMethod : 'changeOut',\n\n\t\t\t// Enable default helpers\n\t\t\thelpers : {\n\t\t\t\toverlay : true,\n\t\t\t\ttitle   : true\n\t\t\t},\n\n\t\t\t// Callbacks\n\t\t\tonCancel     : $.noop, // If canceling\n\t\t\tbeforeLoad   : $.noop, // Before loading\n\t\t\tafterLoad    : $.noop, // After loading\n\t\t\tbeforeShow   : $.noop, // Before changing in current item\n\t\t\tafterShow    : $.noop, // After opening\n\t\t\tbeforeChange : $.noop, // Before changing gallery item\n\t\t\tbeforeClose  : $.noop, // Before closing\n\t\t\tafterClose   : $.noop  // After closing\n\t\t},\n\n\t\t//Current state\n\t\tgroup    : {}, // Selected group\n\t\topts     : {}, // Group options\n\t\tprevious : null,  // Previous element\n\t\tcoming   : null,  // Element being loaded\n\t\tcurrent  : null,  // Currently loaded element\n\t\tisActive : false, // Is activated\n\t\tisOpen   : false, // Is currently open\n\t\tisOpened : false, // Have been fully opened at least once\n\n\t\twrap  : null,\n\t\tskin  : null,\n\t\touter : null,\n\t\tinner : null,\n\n\t\tplayer : {\n\t\t\ttimer    : null,\n\t\t\tisActive : false\n\t\t},\n\n\t\t// Loaders\n\t\tajaxLoad   : null,\n\t\timgPreload : null,\n\n\t\t// Some collections\n\t\ttransitions : {},\n\t\thelpers     : {},\n\n\t\t/*\n\t\t *\tStatic methods\n\t\t */\n\n\t\topen: function (group, opts) {\n\t\t\tif (!group) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!$.isPlainObject(opts)) {\n\t\t\t\topts = {};\n\t\t\t}\n\n\t\t\t// Close if already active\n\t\t\tif (false === F.close(true)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Normalize group\n\t\t\tif (!$.isArray(group)) {\n\t\t\t\tgroup = isQuery(group) ? $(group).get() : [group];\n\t\t\t}\n\n\t\t\t// Recheck if the type of each element is `object` and set content type (image, ajax, etc)\n\t\t\t$.each(group, function(i, element) {\n\t\t\t\tvar obj = {},\n\t\t\t\t\thref,\n\t\t\t\t\ttitle,\n\t\t\t\t\tcontent,\n\t\t\t\t\ttype,\n\t\t\t\t\trez,\n\t\t\t\t\threfParts,\n\t\t\t\t\tselector;\n\n\t\t\t\tif ($.type(element) === \"object\") {\n\t\t\t\t\t// Check if is DOM element\n\t\t\t\t\tif (element.nodeType) {\n\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isQuery(element)) {\n\t\t\t\t\t\tobj = {\n\t\t\t\t\t\t\thref    : element.data('fancybox-href') || element.attr('href'),\n\t\t\t\t\t\t\ttitle   : $('<div/>').text( element.data('fancybox-title') || element.attr('title') || '' ).html(),\n\t\t\t\t\t\t\tisDom   : true,\n\t\t\t\t\t\t\telement : element\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif ($.metadata) {\n\t\t\t\t\t\t\t$.extend(true, obj, element.metadata());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj = element;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\thref  = opts.href  || obj.href || (isString(element) ? element : null);\n\t\t\t\ttitle = opts.title !== undefined ? opts.title : obj.title || '';\n\n\t\t\t\tcontent = opts.content || obj.content;\n\t\t\t\ttype    = content ? 'html' : (opts.type  || obj.type);\n\n\t\t\t\tif (!type && obj.isDom) {\n\t\t\t\t\ttype = element.data('fancybox-type');\n\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\trez  = element.prop('class').match(/fancybox\\.(\\w+)/);\n\t\t\t\t\t\ttype = rez ? rez[1] : null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (isString(href)) {\n\t\t\t\t\t// Try to guess the content type\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\tif (F.isImage(href)) {\n\t\t\t\t\t\t\ttype = 'image';\n\n\t\t\t\t\t\t} else if (F.isSWF(href)) {\n\t\t\t\t\t\t\ttype = 'swf';\n\n\t\t\t\t\t\t} else if (href.charAt(0) === '#') {\n\t\t\t\t\t\t\ttype = 'inline';\n\n\t\t\t\t\t\t} else if (isString(element)) {\n\t\t\t\t\t\t\ttype    = 'html';\n\t\t\t\t\t\t\tcontent = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split url into two pieces with source url and content selector, e.g,\n\t\t\t\t\t// \"/mypage.html #my_id\" will load \"/mypage.html\" and display element having id \"my_id\"\n\t\t\t\t\tif (type === 'ajax') {\n\t\t\t\t\t\threfParts = href.split(/\\s+/, 2);\n\t\t\t\t\t\thref      = hrefParts.shift();\n\t\t\t\t\t\tselector  = hrefParts.shift();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!content) {\n\t\t\t\t\tif (type === 'inline') {\n\t\t\t\t\t\tif (href) {\n\t\t\t\t\t\t\tcontent = $( isString(href) ? href.replace(/.*(?=#[^\\s]+$)/, '') : href ); //strip for ie7\n\n\t\t\t\t\t\t} else if (obj.isDom) {\n\t\t\t\t\t\t\tcontent = element;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (type === 'html') {\n\t\t\t\t\t\tcontent = href;\n\n\t\t\t\t\t} else if (!type && !href && obj.isDom) {\n\t\t\t\t\t\ttype    = 'inline';\n\t\t\t\t\t\tcontent = element;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$.extend(obj, {\n\t\t\t\t\thref     : href,\n\t\t\t\t\ttype     : type,\n\t\t\t\t\tcontent  : content,\n\t\t\t\t\ttitle    : title,\n\t\t\t\t\tselector : selector\n\t\t\t\t});\n\n\t\t\t\tgroup[ i ] = obj;\n\t\t\t});\n\n\t\t\t// Extend the defaults\n\t\t\tF.opts = $.extend(true, {}, F.defaults, opts);\n\n\t\t\t// All options are merged recursive except keys\n\t\t\tif (opts.keys !== undefined) {\n\t\t\t\tF.opts.keys = opts.keys ? $.extend({}, F.defaults.keys, opts.keys) : false;\n\t\t\t}\n\n\t\t\tF.group = group;\n\n\t\t\treturn F._start(F.opts.index);\n\t\t},\n\n\t\t// Cancel image loading or abort ajax request\n\t\tcancel: function () {\n\t\t\tvar coming = F.coming;\n\n\t\t\tif (coming && false === F.trigger('onCancel')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tF.hideLoading();\n\n\t\t\tif (!coming) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (F.ajaxLoad) {\n\t\t\t\tF.ajaxLoad.abort();\n\t\t\t}\n\n\t\t\tF.ajaxLoad = null;\n\n\t\t\tif (F.imgPreload) {\n\t\t\t\tF.imgPreload.onload = F.imgPreload.onerror = null;\n\t\t\t}\n\n\t\t\tif (coming.wrap) {\n\t\t\t\tcoming.wrap.stop(true, true).trigger('onReset').remove();\n\t\t\t}\n\n\t\t\tF.coming = null;\n\n\t\t\t// If the first item has been canceled, then clear everything\n\t\t\tif (!F.current) {\n\t\t\t\tF._afterZoomOut( coming );\n\t\t\t}\n\t\t},\n\n\t\t// Start closing animation if is open; remove immediately if opening/closing\n\t\tclose: function (event) {\n\t\t\tF.cancel();\n\n\t\t\tif (false === F.trigger('beforeClose')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tF.unbindEvents();\n\n\t\t\tif (!F.isActive) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!F.isOpen || event === true) {\n\t\t\t\t$('.fancybox-wrap').stop(true).trigger('onReset').remove();\n\n\t\t\t\tF._afterZoomOut();\n\n\t\t\t} else {\n\t\t\t\tF.isOpen = F.isOpened = false;\n\t\t\t\tF.isClosing = true;\n\n\t\t\t\t$('.fancybox-item, .fancybox-nav').remove();\n\n\t\t\t\tF.wrap.stop(true, true).removeClass('fancybox-opened');\n\n\t\t\t\tF.transitions[ F.current.closeMethod ]();\n\t\t\t}\n\t\t},\n\n\t\t// Manage slideshow:\n\t\t//   $.fancybox.play(); - toggle slideshow\n\t\t//   $.fancybox.play( true ); - start\n\t\t//   $.fancybox.play( false ); - stop\n\t\tplay: function ( action ) {\n\t\t\tvar clear = function () {\n\t\t\t\t\tclearTimeout(F.player.timer);\n\t\t\t\t},\n\t\t\t\tset = function () {\n\t\t\t\t\tclear();\n\n\t\t\t\t\tif (F.current && F.player.isActive) {\n\t\t\t\t\t\tF.player.timer = setTimeout(F.next, F.current.playSpeed);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstop = function () {\n\t\t\t\t\tclear();\n\n\t\t\t\t\tD.unbind('.player');\n\n\t\t\t\t\tF.player.isActive = false;\n\n\t\t\t\t\tF.trigger('onPlayEnd');\n\t\t\t\t},\n\t\t\t\tstart = function () {\n\t\t\t\t\tif (F.current && (F.current.loop || F.current.index < F.group.length - 1)) {\n\t\t\t\t\t\tF.player.isActive = true;\n\n\t\t\t\t\t\tD.bind({\n\t\t\t\t\t\t\t'onCancel.player beforeClose.player' : stop,\n\t\t\t\t\t\t\t'onUpdate.player'   : set,\n\t\t\t\t\t\t\t'beforeLoad.player' : clear\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tset();\n\n\t\t\t\t\t\tF.trigger('onPlayStart');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\tif (action === true || (!F.player.isActive && action !== false)) {\n\t\t\t\tstart();\n\t\t\t} else {\n\t\t\t\tstop();\n\t\t\t}\n\t\t},\n\n\t\t// Navigate to next gallery item\n\t\tnext: function ( direction ) {\n\t\t\tvar current = F.current;\n\n\t\t\tif (current) {\n\t\t\t\tif (!isString(direction)) {\n\t\t\t\t\tdirection = current.direction.next;\n\t\t\t\t}\n\n\t\t\t\tF.jumpto(current.index + 1, direction, 'next');\n\t\t\t}\n\t\t},\n\n\t\t// Navigate to previous gallery item\n\t\tprev: function ( direction ) {\n\t\t\tvar current = F.current;\n\n\t\t\tif (current) {\n\t\t\t\tif (!isString(direction)) {\n\t\t\t\t\tdirection = current.direction.prev;\n\t\t\t\t}\n\n\t\t\t\tF.jumpto(current.index - 1, direction, 'prev');\n\t\t\t}\n\t\t},\n\n\t\t// Navigate to gallery item by index\n\t\tjumpto: function ( index, direction, router ) {\n\t\t\tvar current = F.current;\n\n\t\t\tif (!current) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tindex = getScalar(index);\n\n\t\t\tF.direction = direction || current.direction[ (index >= current.index ? 'next' : 'prev') ];\n\t\t\tF.router    = router || 'jumpto';\n\n\t\t\tif (current.loop) {\n\t\t\t\tif (index < 0) {\n\t\t\t\t\tindex = current.group.length + (index % current.group.length);\n\t\t\t\t}\n\n\t\t\t\tindex = index % current.group.length;\n\t\t\t}\n\n\t\t\tif (current.group[ index ] !== undefined) {\n\t\t\t\tF.cancel();\n\n\t\t\t\tF._start(index);\n\t\t\t}\n\t\t},\n\n\t\t// Center inside viewport and toggle position type to fixed or absolute if needed\n\t\treposition: function (e, onlyAbsolute) {\n\t\t\tvar current = F.current,\n\t\t\t\twrap    = current ? current.wrap : null,\n\t\t\t\tpos;\n\n\t\t\tif (wrap) {\n\t\t\t\tpos = F._getPosition(onlyAbsolute);\n\n\t\t\t\tif (e && e.type === 'scroll') {\n\t\t\t\t\tdelete pos.position;\n\n\t\t\t\t\twrap.stop(true, true).animate(pos, 200);\n\n\t\t\t\t} else {\n\t\t\t\t\twrap.css(pos);\n\n\t\t\t\t\tcurrent.pos = $.extend({}, current.dim, pos);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tupdate: function (e) {\n\t\t\tvar type = (e && e.originalEvent && e.originalEvent.type),\n\t\t\t\tanyway = !type || type === 'orientationchange';\n\n\t\t\tif (anyway) {\n\t\t\t\tclearTimeout(didUpdate);\n\n\t\t\t\tdidUpdate = null;\n\t\t\t}\n\n\t\t\tif (!F.isOpen || didUpdate) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdidUpdate = setTimeout(function() {\n\t\t\t\tvar current = F.current;\n\n\t\t\t\tif (!current || F.isClosing) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tF.wrap.removeClass('fancybox-tmp');\n\n\t\t\t\tif (anyway || type === 'load' || (type === 'resize' && current.autoResize)) {\n\t\t\t\t\tF._setDimension();\n\t\t\t\t}\n\n\t\t\t\tif (!(type === 'scroll' && current.canShrink)) {\n\t\t\t\t\tF.reposition(e);\n\t\t\t\t}\n\n\t\t\t\tF.trigger('onUpdate');\n\n\t\t\t\tdidUpdate = null;\n\n\t\t\t}, (anyway && !isTouch ? 0 : 300));\n\t\t},\n\n\t\t// Shrink content to fit inside viewport or restore if resized\n\t\ttoggle: function ( action ) {\n\t\t\tif (F.isOpen) {\n\t\t\t\tF.current.fitToView = $.type(action) === \"boolean\" ? action : !F.current.fitToView;\n\n\t\t\t\t// Help browser to restore document dimensions\n\t\t\t\tif (isTouch) {\n\t\t\t\t\tF.wrap.removeAttr('style').addClass('fancybox-tmp');\n\n\t\t\t\t\tF.trigger('onUpdate');\n\t\t\t\t}\n\n\t\t\t\tF.update();\n\t\t\t}\n\t\t},\n\n\t\thideLoading: function () {\n\t\t\tD.unbind('.loading');\n\n\t\t\t$('#fancybox-loading').remove();\n\t\t},\n\n\t\tshowLoading: function () {\n\t\t\tvar el, viewport;\n\n\t\t\tF.hideLoading();\n\n\t\t\tel = $(F.opts.tpl.loading).click(F.cancel).appendTo('body');\n\n\t\t\t// If user will press the escape-button, the request will be canceled\n\t\t\tD.bind('keydown.loading', function(e) {\n\t\t\t\tif ((e.which || e.keyCode) === 27) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tF.cancel();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!F.defaults.fixed) {\n\t\t\t\tviewport = F.getViewport();\n\n\t\t\t\tel.css({\n\t\t\t\t\tposition : 'absolute',\n\t\t\t\t\ttop  : (viewport.h * 0.5) + viewport.y,\n\t\t\t\t\tleft : (viewport.w * 0.5) + viewport.x\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tF.trigger('onLoading');\n\t\t},\n\n\t\tgetViewport: function () {\n\t\t\tvar locked = (F.current && F.current.locked) || false,\n\t\t\t\trez    = {\n\t\t\t\t\tx: W.scrollLeft(),\n\t\t\t\t\ty: W.scrollTop()\n\t\t\t\t};\n\n\t\t\tif (locked && locked.length) {\n\t\t\t\trez.w = locked[0].clientWidth;\n\t\t\t\trez.h = locked[0].clientHeight;\n\n\t\t\t} else {\n\t\t\t\t// See http://bugs.jquery.com/ticket/6724\n\t\t\t\trez.w = isTouch && window.innerWidth  ? window.innerWidth  : W.width();\n\t\t\t\trez.h = isTouch && window.innerHeight ? window.innerHeight : W.height();\n\t\t\t}\n\n\t\t\treturn rez;\n\t\t},\n\n\t\t// Unbind the keyboard / clicking actions\n\t\tunbindEvents: function () {\n\t\t\tif (F.wrap && isQuery(F.wrap)) {\n\t\t\t\tF.wrap.unbind('.fb');\n\t\t\t}\n\n\t\t\tD.unbind('.fb');\n\t\t\tW.unbind('.fb');\n\t\t},\n\n\t\tbindEvents: function () {\n\t\t\tvar current = F.current,\n\t\t\t\tkeys;\n\n\t\t\tif (!current) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Changing document height on iOS devices triggers a 'resize' event,\n\t\t\t// that can change document height... repeating infinitely\n\t\t\tW.bind('orientationchange.fb' + (isTouch ? '' : ' resize.fb') + (current.autoCenter && !current.locked ? ' scroll.fb' : ''), F.update);\n\n\t\t\tkeys = current.keys;\n\n\t\t\tif (keys) {\n\t\t\t\tD.bind('keydown.fb', function (e) {\n\t\t\t\t\tvar code   = e.which || e.keyCode,\n\t\t\t\t\t\ttarget = e.target || e.srcElement;\n\n\t\t\t\t\t// Skip esc key if loading, because showLoading will cancel preloading\n\t\t\t\t\tif (code === 27 && F.coming) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore key combinations and key events within form elements\n\t\t\t\t\tif (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey && !(target && (target.type || $(target).is('[contenteditable]')))) {\n\t\t\t\t\t\t$.each(keys, function(i, val) {\n\t\t\t\t\t\t\tif (current.group.length > 1 && val[ code ] !== undefined) {\n\t\t\t\t\t\t\t\tF[ i ]( val[ code ] );\n\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ($.inArray(code, val) > -1) {\n\t\t\t\t\t\t\t\tF[ i ] ();\n\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ($.fn.mousewheel && current.mouseWheel) {\n\t\t\t\tF.wrap.bind('mousewheel.fb', function (e, delta, deltaX, deltaY) {\n\t\t\t\t\tvar target = e.target || null,\n\t\t\t\t\t\tparent = $(target),\n\t\t\t\t\t\tcanScroll = false;\n\n\t\t\t\t\twhile (parent.length) {\n\t\t\t\t\t\tif (canScroll || parent.is('.fancybox-skin') || parent.is('.fancybox-wrap')) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcanScroll = isScrollable( parent[0] );\n\t\t\t\t\t\tparent    = $(parent).parent();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (delta !== 0 && !canScroll) {\n\t\t\t\t\t\tif (F.group.length > 1 && !current.canShrink) {\n\t\t\t\t\t\t\tif (deltaY > 0 || deltaX > 0) {\n\t\t\t\t\t\t\t\tF.prev( deltaY > 0 ? 'down' : 'left' );\n\n\t\t\t\t\t\t\t} else if (deltaY < 0 || deltaX < 0) {\n\t\t\t\t\t\t\t\tF.next( deltaY < 0 ? 'up' : 'right' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\ttrigger: function (event, o) {\n\t\t\tvar ret, obj = o || F.coming || F.current;\n\n\t\t\tif (obj) {\n\t\t\t\tif ($.isFunction( obj[event] )) {\n\t\t\t\t\tret = obj[event].apply(obj, Array.prototype.slice.call(arguments, 1));\n\t\t\t\t}\n\n\t\t\t\tif (ret === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (obj.helpers) {\n\t\t\t\t\t$.each(obj.helpers, function (helper, opts) {\n\t\t\t\t\t\tif (opts && F.helpers[helper] && $.isFunction(F.helpers[helper][event])) {\n\t\t\t\t\t\t\tF.helpers[helper][event]($.extend(true, {}, F.helpers[helper].defaults, opts), obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tD.trigger(event);\n\t\t},\n\n\t\tisImage: function (str) {\n\t\t\treturn isString(str) && str.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i);\n\t\t},\n\n\t\tisSWF: function (str) {\n\t\t\treturn isString(str) && str.match(/\\.(swf)((\\?|#).*)?$/i);\n\t\t},\n\n\t\t_start: function (index) {\n\t\t\tvar coming = {},\n\t\t\t\tobj,\n\t\t\t\thref,\n\t\t\t\ttype,\n\t\t\t\tmargin,\n\t\t\t\tpadding;\n\n\t\t\tindex = getScalar( index );\n\t\t\tobj   = F.group[ index ] || null;\n\n\t\t\tif (!obj) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tcoming = $.extend(true, {}, F.opts, obj);\n\n\t\t\t// Convert margin and padding properties to array - top, right, bottom, left\n\t\t\tmargin  = coming.margin;\n\t\t\tpadding = coming.padding;\n\n\t\t\tif ($.type(margin) === 'number') {\n\t\t\t\tcoming.margin = [margin, margin, margin, margin];\n\t\t\t}\n\n\t\t\tif ($.type(padding) === 'number') {\n\t\t\t\tcoming.padding = [padding, padding, padding, padding];\n\t\t\t}\n\n\t\t\t// 'modal' propery is just a shortcut\n\t\t\tif (coming.modal) {\n\t\t\t\t$.extend(true, coming, {\n\t\t\t\t\tcloseBtn   : false,\n\t\t\t\t\tcloseClick : false,\n\t\t\t\t\tnextClick  : false,\n\t\t\t\t\tarrows     : false,\n\t\t\t\t\tmouseWheel : false,\n\t\t\t\t\tkeys       : null,\n\t\t\t\t\thelpers: {\n\t\t\t\t\t\toverlay : {\n\t\t\t\t\t\t\tcloseClick : false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// 'autoSize' property is a shortcut, too\n\t\t\tif (coming.autoSize) {\n\t\t\t\tcoming.autoWidth = coming.autoHeight = true;\n\t\t\t}\n\n\t\t\tif (coming.width === 'auto') {\n\t\t\t\tcoming.autoWidth = true;\n\t\t\t}\n\n\t\t\tif (coming.height === 'auto') {\n\t\t\t\tcoming.autoHeight = true;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Add reference to the group, so it`s possible to access from callbacks, example:\n\t\t\t * afterLoad : function() {\n\t\t\t *     this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');\n\t\t\t * }\n\t\t\t */\n\n\t\t\tcoming.group  = F.group;\n\t\t\tcoming.index  = index;\n\n\t\t\t// Give a chance for callback or helpers to update coming item (type, title, etc)\n\t\t\tF.coming = coming;\n\n\t\t\tif (false === F.trigger('beforeLoad')) {\n\t\t\t\tF.coming = null;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttype = coming.type;\n\t\t\thref = coming.href;\n\n\t\t\tif (!type) {\n\t\t\t\tF.coming = null;\n\n\t\t\t\t//If we can not determine content type then drop silently or display next/prev item if looping through gallery\n\t\t\t\tif (F.current && F.router && F.router !== 'jumpto') {\n\t\t\t\t\tF.current.index = index;\n\n\t\t\t\t\treturn F[ F.router ]( F.direction );\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tF.isActive = true;\n\n\t\t\tif (type === 'image' || type === 'swf') {\n\t\t\t\tcoming.autoHeight = coming.autoWidth = false;\n\t\t\t\tcoming.scrolling  = 'visible';\n\t\t\t}\n\n\t\t\tif (type === 'image') {\n\t\t\t\tcoming.aspectRatio = true;\n\t\t\t}\n\n\t\t\tif (type === 'iframe' && isTouch) {\n\t\t\t\tcoming.scrolling = 'scroll';\n\t\t\t}\n\n\t\t\t// Build the neccessary markup\n\t\t\tcoming.wrap = $(coming.tpl.wrap).addClass('fancybox-' + (isTouch ? 'mobile' : 'desktop') + ' fancybox-type-' + type + ' fancybox-tmp ' + coming.wrapCSS).appendTo( coming.parent || 'body' );\n\n\t\t\t$.extend(coming, {\n\t\t\t\tskin  : $('.fancybox-skin',  coming.wrap),\n\t\t\t\touter : $('.fancybox-outer', coming.wrap),\n\t\t\t\tinner : $('.fancybox-inner', coming.wrap)\n\t\t\t});\n\n\t\t\t$.each([\"Top\", \"Right\", \"Bottom\", \"Left\"], function(i, v) {\n\t\t\t\tcoming.skin.css('padding' + v, getValue(coming.padding[ i ]));\n\t\t\t});\n\n\t\t\tF.trigger('onReady');\n\n\t\t\t// Check before try to load; 'inline' and 'html' types need content, others - href\n\t\t\tif (type === 'inline' || type === 'html') {\n\t\t\t\tif (!coming.content || !coming.content.length) {\n\t\t\t\t\treturn F._error( 'content' );\n\t\t\t\t}\n\n\t\t\t} else if (!href) {\n\t\t\t\treturn F._error( 'href' );\n\t\t\t}\n\n\t\t\tif (type === 'image') {\n\t\t\t\tF._loadImage();\n\n\t\t\t} else if (type === 'ajax') {\n\t\t\t\tF._loadAjax();\n\n\t\t\t} else if (type === 'iframe') {\n\t\t\t\tF._loadIframe();\n\n\t\t\t} else {\n\t\t\t\tF._afterLoad();\n\t\t\t}\n\t\t},\n\n\t\t_error: function ( type ) {\n\t\t\t$.extend(F.coming, {\n\t\t\t\ttype       : 'html',\n\t\t\t\tautoWidth  : true,\n\t\t\t\tautoHeight : true,\n\t\t\t\tminWidth   : 0,\n\t\t\t\tminHeight  : 0,\n\t\t\t\tscrolling  : 'no',\n\t\t\t\thasError   : type,\n\t\t\t\tcontent    : F.coming.tpl.error\n\t\t\t});\n\n\t\t\tF._afterLoad();\n\t\t},\n\n\t\t_loadImage: function () {\n\t\t\t// Reset preload image so it is later possible to check \"complete\" property\n\t\t\tvar img = F.imgPreload = new Image();\n\n\t\t\timg.onload = function () {\n\t\t\t\tthis.onload = this.onerror = null;\n\n\t\t\t\tF.coming.width  = this.width / F.opts.pixelRatio;\n\t\t\t\tF.coming.height = this.height / F.opts.pixelRatio;\n\n\t\t\t\tF._afterLoad();\n\t\t\t};\n\n\t\t\timg.onerror = function () {\n\t\t\t\tthis.onload = this.onerror = null;\n\n\t\t\t\tF._error( 'image' );\n\t\t\t};\n\n\t\t\timg.src = F.coming.href;\n\n\t\t\tif (img.complete !== true) {\n\t\t\t\tF.showLoading();\n\t\t\t}\n\t\t},\n\n\t\t_loadAjax: function () {\n\t\t\tvar coming = F.coming;\n\n\t\t\tF.showLoading();\n\n\t\t\tF.ajaxLoad = $.ajax($.extend({}, coming.ajax, {\n\t\t\t\turl: coming.href,\n\t\t\t\terror: function (jqXHR, textStatus) {\n\t\t\t\t\tif (F.coming && textStatus !== 'abort') {\n\t\t\t\t\t\tF._error( 'ajax', jqXHR );\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tF.hideLoading();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsuccess: function (data, textStatus) {\n\t\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\t\tcoming.content = data;\n\n\t\t\t\t\t\tF._afterLoad();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t},\n\n\t\t_loadIframe: function() {\n\t\t\tvar coming = F.coming,\n\t\t\t\tiframe = $(coming.tpl.iframe.replace(/\\{rnd\\}/g, new Date().getTime()))\n\t\t\t\t\t.attr('scrolling', isTouch ? 'auto' : coming.iframe.scrolling)\n\t\t\t\t\t.attr('src', coming.href);\n\n\t\t\t// This helps IE\n\t\t\t$(coming.wrap).bind('onReset', function () {\n\t\t\t\ttry {\n\t\t\t\t\t$(this).find('iframe').hide().attr('src', '//about:blank').end().empty();\n\t\t\t\t} catch (e) {}\n\t\t\t});\n\n\t\t\tif (coming.iframe.preload) {\n\t\t\t\tF.showLoading();\n\n\t\t\t\tiframe.one('load', function() {\n\t\t\t\t\t$(this).data('ready', 1);\n\n\t\t\t\t\t// iOS will lose scrolling if we resize\n\t\t\t\t\tif (!isTouch) {\n\t\t\t\t\t\t$(this).bind('load.fb', F.update);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Without this trick:\n\t\t\t\t\t//   - iframe won't scroll on iOS devices\n\t\t\t\t\t//   - IE7 sometimes displays empty iframe\n\t\t\t\t\t$(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();\n\n\t\t\t\t\tF._afterLoad();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcoming.content = iframe.appendTo( coming.inner );\n\n\t\t\tif (!coming.iframe.preload) {\n\t\t\t\tF._afterLoad();\n\t\t\t}\n\t\t},\n\n\t\t_preloadImages: function() {\n\t\t\tvar group   = F.group,\n\t\t\t\tcurrent = F.current,\n\t\t\t\tlen     = group.length,\n\t\t\t\tcnt     = current.preload ? Math.min(current.preload, len - 1) : 0,\n\t\t\t\titem,\n\t\t\t\ti;\n\n\t\t\tfor (i = 1; i <= cnt; i += 1) {\n\t\t\t\titem = group[ (current.index + i ) % len ];\n\n\t\t\t\tif (item.type === 'image' && item.href) {\n\t\t\t\t\tnew Image().src = item.href;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_afterLoad: function () {\n\t\t\tvar coming   = F.coming,\n\t\t\t\tprevious = F.current,\n\t\t\t\tplaceholder = 'fancybox-placeholder',\n\t\t\t\tcurrent,\n\t\t\t\tcontent,\n\t\t\t\ttype,\n\t\t\t\tscrolling,\n\t\t\t\thref,\n\t\t\t\tembed;\n\n\t\t\tF.hideLoading();\n\n\t\t\tif (!coming || F.isActive === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (false === F.trigger('afterLoad', coming, previous)) {\n\t\t\t\tcoming.wrap.stop(true).trigger('onReset').remove();\n\n\t\t\t\tF.coming = null;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (previous) {\n\t\t\t\tF.trigger('beforeChange', previous);\n\n\t\t\t\tprevious.wrap.stop(true).removeClass('fancybox-opened')\n\t\t\t\t\t.find('.fancybox-item, .fancybox-nav')\n\t\t\t\t\t.remove();\n\t\t\t}\n\n\t\t\tF.unbindEvents();\n\n\t\t\tcurrent   = coming;\n\t\t\tcontent   = coming.content;\n\t\t\ttype      = coming.type;\n\t\t\tscrolling = coming.scrolling;\n\n\t\t\t$.extend(F, {\n\t\t\t\twrap  : current.wrap,\n\t\t\t\tskin  : current.skin,\n\t\t\t\touter : current.outer,\n\t\t\t\tinner : current.inner,\n\t\t\t\tcurrent  : current,\n\t\t\t\tprevious : previous\n\t\t\t});\n\n\t\t\thref = current.href;\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'inline':\n\t\t\t\tcase 'ajax':\n\t\t\t\tcase 'html':\n\t\t\t\t\tif (current.selector) {\n\t\t\t\t\t\tcontent = $('<div>').html(content).find(current.selector);\n\n\t\t\t\t\t} else if (isQuery(content)) {\n\t\t\t\t\t\tif (!content.data(placeholder)) {\n\t\t\t\t\t\t\tcontent.data(placeholder, $('<div class=\"' + placeholder + '\"></div>').insertAfter( content ).hide() );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontent = content.show().detach();\n\n\t\t\t\t\t\tcurrent.wrap.bind('onReset', function () {\n\t\t\t\t\t\t\tif ($(this).find(content).length) {\n\t\t\t\t\t\t\t\tcontent.hide().replaceAll( content.data(placeholder) ).data(placeholder, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'image':\n\t\t\t\t\tcontent = current.tpl.image.replace(/\\{href\\}/g, href);\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'swf':\n\t\t\t\t\tcontent = '<object id=\"fancybox-swf\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\"100%\" height=\"100%\"><param name=\"movie\" value=\"' + href + '\"></param>';\n\t\t\t\t\tembed   = '';\n\n\t\t\t\t\t$.each(current.swf, function(name, val) {\n\t\t\t\t\t\tcontent += '<param name=\"' + name + '\" value=\"' + val + '\"></param>';\n\t\t\t\t\t\tembed   += ' ' + name + '=\"' + val + '\"';\n\t\t\t\t\t});\n\n\t\t\t\t\tcontent += '<embed src=\"' + href + '\" type=\"application/x-shockwave-flash\" width=\"100%\" height=\"100%\"' + embed + '></embed></object>';\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!(isQuery(content) && content.parent().is(current.inner))) {\n\t\t\t\tcurrent.inner.append( content );\n\t\t\t}\n\n\t\t\t// Give a chance for helpers or callbacks to update elements\n\t\t\tF.trigger('beforeShow');\n\n\t\t\t// Set scrolling before calculating dimensions\n\t\t\tcurrent.inner.css('overflow', scrolling === 'yes' ? 'scroll' : (scrolling === 'no' ? 'hidden' : scrolling));\n\n\t\t\t// Set initial dimensions and start position\n\t\t\tF._setDimension();\n\n\t\t\tF.reposition();\n\n\t\t\tF.isOpen = false;\n\t\t\tF.coming = null;\n\n\t\t\tF.bindEvents();\n\n\t\t\tif (!F.isOpened) {\n\t\t\t\t$('.fancybox-wrap').not( current.wrap ).stop(true).trigger('onReset').remove();\n\n\t\t\t} else if (previous.prevMethod) {\n\t\t\t\tF.transitions[ previous.prevMethod ]();\n\t\t\t}\n\n\t\t\tF.transitions[ F.isOpened ? current.nextMethod : current.openMethod ]();\n\n\t\t\tF._preloadImages();\n\t\t},\n\n\t\t_setDimension: function () {\n\t\t\tvar viewport   = F.getViewport(),\n\t\t\t\tsteps      = 0,\n\t\t\t\tcanShrink  = false,\n\t\t\t\tcanExpand  = false,\n\t\t\t\twrap       = F.wrap,\n\t\t\t\tskin       = F.skin,\n\t\t\t\tinner      = F.inner,\n\t\t\t\tcurrent    = F.current,\n\t\t\t\twidth      = current.width,\n\t\t\t\theight     = current.height,\n\t\t\t\tminWidth   = current.minWidth,\n\t\t\t\tminHeight  = current.minHeight,\n\t\t\t\tmaxWidth   = current.maxWidth,\n\t\t\t\tmaxHeight  = current.maxHeight,\n\t\t\t\tscrolling  = current.scrolling,\n\t\t\t\tscrollOut  = current.scrollOutside ? current.scrollbarWidth : 0,\n\t\t\t\tmargin     = current.margin,\n\t\t\t\twMargin    = getScalar(margin[1] + margin[3]),\n\t\t\t\thMargin    = getScalar(margin[0] + margin[2]),\n\t\t\t\twPadding,\n\t\t\t\thPadding,\n\t\t\t\twSpace,\n\t\t\t\thSpace,\n\t\t\t\torigWidth,\n\t\t\t\torigHeight,\n\t\t\t\torigMaxWidth,\n\t\t\t\torigMaxHeight,\n\t\t\t\tratio,\n\t\t\t\twidth_,\n\t\t\t\theight_,\n\t\t\t\tmaxWidth_,\n\t\t\t\tmaxHeight_,\n\t\t\t\tiframe,\n\t\t\t\tbody;\n\n\t\t\t// Reset dimensions so we could re-check actual size\n\t\t\twrap.add(skin).add(inner).width('auto').height('auto').removeClass('fancybox-tmp');\n\n\t\t\twPadding = getScalar(skin.outerWidth(true)  - skin.width());\n\t\t\thPadding = getScalar(skin.outerHeight(true) - skin.height());\n\n\t\t\t// Any space between content and viewport (margin, padding, border, title)\n\t\t\twSpace = wMargin + wPadding;\n\t\t\thSpace = hMargin + hPadding;\n\n\t\t\torigWidth  = isPercentage(width)  ? (viewport.w - wSpace) * getScalar(width)  / 100 : width;\n\t\t\torigHeight = isPercentage(height) ? (viewport.h - hSpace) * getScalar(height) / 100 : height;\n\n\t\t\tif (current.type === 'iframe') {\n\t\t\t\tiframe = current.content;\n\n\t\t\t\tif (current.autoHeight && iframe.data('ready') === 1) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (iframe[0].contentWindow.document.location) {\n\t\t\t\t\t\t\tinner.width( origWidth ).height(9999);\n\n\t\t\t\t\t\t\tbody = iframe.contents().find('body');\n\n\t\t\t\t\t\t\tif (scrollOut) {\n\t\t\t\t\t\t\t\tbody.css('overflow-x', 'hidden');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torigHeight = body.outerHeight(true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\n\t\t\t} else if (current.autoWidth || current.autoHeight) {\n\t\t\t\tinner.addClass( 'fancybox-tmp' );\n\n\t\t\t\t// Set width or height in case we need to calculate only one dimension\n\t\t\t\tif (!current.autoWidth) {\n\t\t\t\t\tinner.width( origWidth );\n\t\t\t\t}\n\n\t\t\t\tif (!current.autoHeight) {\n\t\t\t\t\tinner.height( origHeight );\n\t\t\t\t}\n\n\t\t\t\tif (current.autoWidth) {\n\t\t\t\t\torigWidth = inner.width();\n\t\t\t\t}\n\n\t\t\t\tif (current.autoHeight) {\n\t\t\t\t\torigHeight = inner.height();\n\t\t\t\t}\n\n\t\t\t\tinner.removeClass( 'fancybox-tmp' );\n\t\t\t}\n\n\t\t\twidth  = getScalar( origWidth );\n\t\t\theight = getScalar( origHeight );\n\n\t\t\tratio  = origWidth / origHeight;\n\n\t\t\t// Calculations for the content\n\t\t\tminWidth  = getScalar(isPercentage(minWidth) ? getScalar(minWidth, 'w') - wSpace : minWidth);\n\t\t\tmaxWidth  = getScalar(isPercentage(maxWidth) ? getScalar(maxWidth, 'w') - wSpace : maxWidth);\n\n\t\t\tminHeight = getScalar(isPercentage(minHeight) ? getScalar(minHeight, 'h') - hSpace : minHeight);\n\t\t\tmaxHeight = getScalar(isPercentage(maxHeight) ? getScalar(maxHeight, 'h') - hSpace : maxHeight);\n\n\t\t\t// These will be used to determine if wrap can fit in the viewport\n\t\t\torigMaxWidth  = maxWidth;\n\t\t\torigMaxHeight = maxHeight;\n\n\t\t\tif (current.fitToView) {\n\t\t\t\tmaxWidth  = Math.min(viewport.w - wSpace, maxWidth);\n\t\t\t\tmaxHeight = Math.min(viewport.h - hSpace, maxHeight);\n\t\t\t}\n\n\t\t\tmaxWidth_  = viewport.w - wMargin;\n\t\t\tmaxHeight_ = viewport.h - hMargin;\n\n\t\t\tif (current.aspectRatio) {\n\t\t\t\tif (width > maxWidth) {\n\t\t\t\t\twidth  = maxWidth;\n\t\t\t\t\theight = getScalar(width / ratio);\n\t\t\t\t}\n\n\t\t\t\tif (height > maxHeight) {\n\t\t\t\t\theight = maxHeight;\n\t\t\t\t\twidth  = getScalar(height * ratio);\n\t\t\t\t}\n\n\t\t\t\tif (width < minWidth) {\n\t\t\t\t\twidth  = minWidth;\n\t\t\t\t\theight = getScalar(width / ratio);\n\t\t\t\t}\n\n\t\t\t\tif (height < minHeight) {\n\t\t\t\t\theight = minHeight;\n\t\t\t\t\twidth  = getScalar(height * ratio);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\twidth = Math.max(minWidth, Math.min(width, maxWidth));\n\n\t\t\t\tif (current.autoHeight && current.type !== 'iframe') {\n\t\t\t\t\tinner.width( width );\n\n\t\t\t\t\theight = inner.height();\n\t\t\t\t}\n\n\t\t\t\theight = Math.max(minHeight, Math.min(height, maxHeight));\n\t\t\t}\n\n\t\t\t// Try to fit inside viewport (including the title)\n\t\t\tif (current.fitToView) {\n\t\t\t\tinner.width( width ).height( height );\n\n\t\t\t\twrap.width( width + wPadding );\n\n\t\t\t\t// Real wrap dimensions\n\t\t\t\twidth_  = wrap.width();\n\t\t\t\theight_ = wrap.height();\n\n\t\t\t\tif (current.aspectRatio) {\n\t\t\t\t\twhile ((width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight) {\n\t\t\t\t\t\tif (steps++ > 19) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\theight = Math.max(minHeight, Math.min(maxHeight, height - 10));\n\t\t\t\t\t\twidth  = getScalar(height * ratio);\n\n\t\t\t\t\t\tif (width < minWidth) {\n\t\t\t\t\t\t\twidth  = minWidth;\n\t\t\t\t\t\t\theight = getScalar(width / ratio);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (width > maxWidth) {\n\t\t\t\t\t\t\twidth  = maxWidth;\n\t\t\t\t\t\t\theight = getScalar(width / ratio);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinner.width( width ).height( height );\n\n\t\t\t\t\t\twrap.width( width + wPadding );\n\n\t\t\t\t\t\twidth_  = wrap.width();\n\t\t\t\t\t\theight_ = wrap.height();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\twidth  = Math.max(minWidth,  Math.min(width,  width  - (width_  - maxWidth_)));\n\t\t\t\t\theight = Math.max(minHeight, Math.min(height, height - (height_ - maxHeight_)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (scrollOut && scrolling === 'auto' && height < origHeight && (width + wPadding + scrollOut) < maxWidth_) {\n\t\t\t\twidth += scrollOut;\n\t\t\t}\n\n\t\t\tinner.width( width ).height( height );\n\n\t\t\twrap.width( width + wPadding );\n\n\t\t\twidth_  = wrap.width();\n\t\t\theight_ = wrap.height();\n\n\t\t\tcanShrink = (width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight;\n\t\t\tcanExpand = current.aspectRatio ? (width < origMaxWidth && height < origMaxHeight && width < origWidth && height < origHeight) : ((width < origMaxWidth || height < origMaxHeight) && (width < origWidth || height < origHeight));\n\n\t\t\t$.extend(current, {\n\t\t\t\tdim : {\n\t\t\t\t\twidth\t: getValue( width_ ),\n\t\t\t\t\theight\t: getValue( height_ )\n\t\t\t\t},\n\t\t\t\torigWidth  : origWidth,\n\t\t\t\torigHeight : origHeight,\n\t\t\t\tcanShrink  : canShrink,\n\t\t\t\tcanExpand  : canExpand,\n\t\t\t\twPadding   : wPadding,\n\t\t\t\thPadding   : hPadding,\n\t\t\t\twrapSpace  : height_ - skin.outerHeight(true),\n\t\t\t\tskinSpace  : skin.height() - height\n\t\t\t});\n\n\t\t\tif (!iframe && current.autoHeight && height > minHeight && height < maxHeight && !canExpand) {\n\t\t\t\tinner.height('auto');\n\t\t\t}\n\t\t},\n\n\t\t_getPosition: function (onlyAbsolute) {\n\t\t\tvar current  = F.current,\n\t\t\t\tviewport = F.getViewport(),\n\t\t\t\tmargin   = current.margin,\n\t\t\t\twidth    = F.wrap.width()  + margin[1] + margin[3],\n\t\t\t\theight   = F.wrap.height() + margin[0] + margin[2],\n\t\t\t\trez      = {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop  : margin[0],\n\t\t\t\t\tleft : margin[3]\n\t\t\t\t};\n\n\t\t\tif (current.autoCenter && current.fixed && !onlyAbsolute && height <= viewport.h && width <= viewport.w) {\n\t\t\t\trez.position = 'fixed';\n\n\t\t\t} else if (!current.locked) {\n\t\t\t\trez.top  += viewport.y;\n\t\t\t\trez.left += viewport.x;\n\t\t\t}\n\n\t\t\trez.top  = getValue(Math.max(rez.top,  rez.top  + ((viewport.h - height) * current.topRatio)));\n\t\t\trez.left = getValue(Math.max(rez.left, rez.left + ((viewport.w - width)  * current.leftRatio)));\n\n\t\t\treturn rez;\n\t\t},\n\n\t\t_afterZoomIn: function () {\n\t\t\tvar current = F.current;\n\n\t\t\tif (!current) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tF.isOpen = F.isOpened = true;\n\n\t\t\tF.wrap.css('overflow', 'visible').addClass('fancybox-opened').hide().show(0);\n\n\t\t\tF.update();\n\n\t\t\t// Assign a click event\n\t\t\tif ( current.closeClick || (current.nextClick && F.group.length > 1) ) {\n\t\t\t\tF.inner.css('cursor', 'pointer').bind('click.fb', function(e) {\n\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).parent().is('a')) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tF[ current.closeClick ? 'close' : 'next' ]();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Create a close button\n\t\t\tif (current.closeBtn) {\n\t\t\t\t$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb', function(e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tF.close();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Create navigation arrows\n\t\t\tif (current.arrows && F.group.length > 1) {\n\t\t\t\tif (current.loop || current.index > 0) {\n\t\t\t\t\t$(current.tpl.prev).appendTo(F.outer).bind('click.fb', F.prev);\n\t\t\t\t}\n\n\t\t\t\tif (current.loop || current.index < F.group.length - 1) {\n\t\t\t\t\t$(current.tpl.next).appendTo(F.outer).bind('click.fb', F.next);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tF.trigger('afterShow');\n\n\t\t\t// Stop the slideshow if this is the last item\n\t\t\tif (!current.loop && current.index === current.group.length - 1) {\n\n\t\t\t\tF.play( false );\n\n\t\t\t} else if (F.opts.autoPlay && !F.player.isActive) {\n\t\t\t\tF.opts.autoPlay = false;\n\n\t\t\t\tF.play(true);\n\t\t\t}\n\t\t},\n\n\t\t_afterZoomOut: function ( obj ) {\n\t\t\tobj = obj || F.current;\n\n\t\t\t$('.fancybox-wrap').trigger('onReset').remove();\n\n\t\t\t$.extend(F, {\n\t\t\t\tgroup  : {},\n\t\t\t\topts   : {},\n\t\t\t\trouter : false,\n\t\t\t\tcurrent   : null,\n\t\t\t\tisActive  : false,\n\t\t\t\tisOpened  : false,\n\t\t\t\tisOpen    : false,\n\t\t\t\tisClosing : false,\n\t\t\t\twrap   : null,\n\t\t\t\tskin   : null,\n\t\t\t\touter  : null,\n\t\t\t\tinner  : null\n\t\t\t});\n\n\t\t\tF.trigger('afterClose', obj);\n\t\t}\n\t});\n\n\t/*\n\t *\tDefault transitions\n\t */\n\n\tF.transitions = {\n\t\tgetOrigPosition: function () {\n\t\t\tvar current  = F.current,\n\t\t\t\telement  = current.element,\n\t\t\t\torig     = current.orig,\n\t\t\t\tpos      = {},\n\t\t\t\twidth    = 50,\n\t\t\t\theight   = 50,\n\t\t\t\thPadding = current.hPadding,\n\t\t\t\twPadding = current.wPadding,\n\t\t\t\tviewport = F.getViewport();\n\n\t\t\tif (!orig && current.isDom && element.is(':visible')) {\n\t\t\t\torig = element.find('img:first');\n\n\t\t\t\tif (!orig.length) {\n\t\t\t\t\torig = element;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isQuery(orig)) {\n\t\t\t\tpos = orig.offset();\n\n\t\t\t\tif (orig.is('img')) {\n\t\t\t\t\twidth  = orig.outerWidth();\n\t\t\t\t\theight = orig.outerHeight();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tpos.top  = viewport.y + (viewport.h - height) * current.topRatio;\n\t\t\t\tpos.left = viewport.x + (viewport.w - width)  * current.leftRatio;\n\t\t\t}\n\n\t\t\tif (F.wrap.css('position') === 'fixed' || current.locked) {\n\t\t\t\tpos.top  -= viewport.y;\n\t\t\t\tpos.left -= viewport.x;\n\t\t\t}\n\n\t\t\tpos = {\n\t\t\t\ttop     : getValue(pos.top  - hPadding * current.topRatio),\n\t\t\t\tleft    : getValue(pos.left - wPadding * current.leftRatio),\n\t\t\t\twidth   : getValue(width  + wPadding),\n\t\t\t\theight  : getValue(height + hPadding)\n\t\t\t};\n\n\t\t\treturn pos;\n\t\t},\n\n\t\tstep: function (now, fx) {\n\t\t\tvar ratio,\n\t\t\t\tpadding,\n\t\t\t\tvalue,\n\t\t\t\tprop       = fx.prop,\n\t\t\t\tcurrent    = F.current,\n\t\t\t\twrapSpace  = current.wrapSpace,\n\t\t\t\tskinSpace  = current.skinSpace;\n\n\t\t\tif (prop === 'width' || prop === 'height') {\n\t\t\t\tratio = fx.end === fx.start ? 1 : (now - fx.start) / (fx.end - fx.start);\n\n\t\t\t\tif (F.isClosing) {\n\t\t\t\t\tratio = 1 - ratio;\n\t\t\t\t}\n\n\t\t\t\tpadding = prop === 'width' ? current.wPadding : current.hPadding;\n\t\t\t\tvalue   = now - padding;\n\n\t\t\t\tF.skin[ prop ](  getScalar( prop === 'width' ?  value : value - (wrapSpace * ratio) ) );\n\t\t\t\tF.inner[ prop ]( getScalar( prop === 'width' ?  value : value - (wrapSpace * ratio) - (skinSpace * ratio) ) );\n\t\t\t}\n\t\t},\n\n\t\tzoomIn: function () {\n\t\t\tvar current  = F.current,\n\t\t\t\tstartPos = current.pos,\n\t\t\t\teffect   = current.openEffect,\n\t\t\t\telastic  = effect === 'elastic',\n\t\t\t\tendPos   = $.extend({opacity : 1}, startPos);\n\n\t\t\t// Remove \"position\" property that breaks older IE\n\t\t\tdelete endPos.position;\n\n\t\t\tif (elastic) {\n\t\t\t\tstartPos = this.getOrigPosition();\n\n\t\t\t\tif (current.openOpacity) {\n\t\t\t\t\tstartPos.opacity = 0.1;\n\t\t\t\t}\n\n\t\t\t} else if (effect === 'fade') {\n\t\t\t\tstartPos.opacity = 0.1;\n\t\t\t}\n\n\t\t\tF.wrap.css(startPos).animate(endPos, {\n\t\t\t\tduration : effect === 'none' ? 0 : current.openSpeed,\n\t\t\t\teasing   : current.openEasing,\n\t\t\t\tstep     : elastic ? this.step : null,\n\t\t\t\tcomplete : F._afterZoomIn\n\t\t\t});\n\t\t},\n\n\t\tzoomOut: function () {\n\t\t\tvar current  = F.current,\n\t\t\t\teffect   = current.closeEffect,\n\t\t\t\telastic  = effect === 'elastic',\n\t\t\t\tendPos   = {opacity : 0.1};\n\n\t\t\tif (elastic) {\n\t\t\t\tendPos = this.getOrigPosition();\n\n\t\t\t\tif (current.closeOpacity) {\n\t\t\t\t\tendPos.opacity = 0.1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tF.wrap.animate(endPos, {\n\t\t\t\tduration : effect === 'none' ? 0 : current.closeSpeed,\n\t\t\t\teasing   : current.closeEasing,\n\t\t\t\tstep     : elastic ? this.step : null,\n\t\t\t\tcomplete : F._afterZoomOut\n\t\t\t});\n\t\t},\n\n\t\tchangeIn: function () {\n\t\t\tvar current   = F.current,\n\t\t\t\teffect    = current.nextEffect,\n\t\t\t\tstartPos  = current.pos,\n\t\t\t\tendPos    = { opacity : 1 },\n\t\t\t\tdirection = F.direction,\n\t\t\t\tdistance  = 200,\n\t\t\t\tfield;\n\n\t\t\tstartPos.opacity = 0.1;\n\n\t\t\tif (effect === 'elastic') {\n\t\t\t\tfield = direction === 'down' || direction === 'up' ? 'top' : 'left';\n\n\t\t\t\tif (direction === 'down' || direction === 'right') {\n\t\t\t\t\tstartPos[ field ] = getValue(getScalar(startPos[ field ]) - distance);\n\t\t\t\t\tendPos[ field ]   = '+=' + distance + 'px';\n\n\t\t\t\t} else {\n\t\t\t\t\tstartPos[ field ] = getValue(getScalar(startPos[ field ]) + distance);\n\t\t\t\t\tendPos[ field ]   = '-=' + distance + 'px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Workaround for http://bugs.jquery.com/ticket/12273\n\t\t\tif (effect === 'none') {\n\t\t\t\tF._afterZoomIn();\n\n\t\t\t} else {\n\t\t\t\tF.wrap.css(startPos).animate(endPos, {\n\t\t\t\t\tduration : current.nextSpeed,\n\t\t\t\t\teasing   : current.nextEasing,\n\t\t\t\t\tcomplete : F._afterZoomIn\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tchangeOut: function () {\n\t\t\tvar previous  = F.previous,\n\t\t\t\teffect    = previous.prevEffect,\n\t\t\t\tendPos    = { opacity : 0.1 },\n\t\t\t\tdirection = F.direction,\n\t\t\t\tdistance  = 200;\n\n\t\t\tif (effect === 'elastic') {\n\t\t\t\tendPos[ direction === 'down' || direction === 'up' ? 'top' : 'left' ] = ( direction === 'up' || direction === 'left' ? '-' : '+' ) + '=' + distance + 'px';\n\t\t\t}\n\n\t\t\tprevious.wrap.animate(endPos, {\n\t\t\t\tduration : effect === 'none' ? 0 : previous.prevSpeed,\n\t\t\t\teasing   : previous.prevEasing,\n\t\t\t\tcomplete : function () {\n\t\t\t\t\t$(this).trigger('onReset').remove();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/*\n\t *\tOverlay helper\n\t */\n\n\tF.helpers.overlay = {\n\t\tdefaults : {\n\t\t\tcloseClick : true,      // if true, fancyBox will be closed when user clicks on the overlay\n\t\t\tspeedOut   : 200,       // duration of fadeOut animation\n\t\t\tshowEarly  : true,      // indicates if should be opened immediately or wait until the content is ready\n\t\t\tcss        : {},        // custom CSS properties\n\t\t\tlocked     : !isTouch,  // if true, the content will be locked into overlay\n\t\t\tfixed      : true       // if false, the overlay CSS position property will not be set to \"fixed\"\n\t\t},\n\n\t\toverlay : null,      // current handle\n\t\tfixed   : false,     // indicates if the overlay has position \"fixed\"\n\t\tel      : $('html'), // element that contains \"the lock\"\n\n\t\t// Public methods\n\t\tcreate : function(opts) {\n\t\t\tvar parent;\n\n\t\t\topts = $.extend({}, this.defaults, opts);\n\n\t\t\tif (this.overlay) {\n\t\t\t\tthis.close();\n\t\t\t}\n\n\t\t\tparent = F.coming ? F.coming.parent : opts.parent;\n\n\t\t\tthis.overlay = $('<div class=\"fancybox-overlay\"></div>').appendTo( parent && parent.length ? parent : 'body' );\n\t\t\tthis.fixed   = false;\n\n\t\t\tif (opts.fixed && F.defaults.fixed) {\n\t\t\t\tthis.overlay.addClass('fancybox-overlay-fixed');\n\n\t\t\t\tthis.fixed = true;\n\t\t\t}\n\t\t},\n\n\t\topen : function(opts) {\n\t\t\tvar that = this;\n\n\t\t\topts = $.extend({}, this.defaults, opts);\n\n\t\t\tif (this.overlay) {\n\t\t\t\tthis.overlay.unbind('.overlay').width('auto').height('auto');\n\n\t\t\t} else {\n\t\t\t\tthis.create(opts);\n\t\t\t}\n\n\t\t\tif (!this.fixed) {\n\t\t\t\tW.bind('resize.overlay', $.proxy( this.update, this) );\n\n\t\t\t\tthis.update();\n\t\t\t}\n\n\t\t\tif (opts.closeClick) {\n\t\t\t\tthis.overlay.bind('click.overlay', function(e) {\n\t\t\t\t\tif ($(e.target).hasClass('fancybox-overlay')) {\n\t\t\t\t\t\tif (F.isActive) {\n\t\t\t\t\t\t\tF.close();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.close();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.overlay.css( opts.css ).show();\n\t\t},\n\n\t\tclose : function() {\n\t\t\tW.unbind('resize.overlay');\n\n\t\t\tif (this.el.hasClass('fancybox-lock')) {\n\t\t\t\t$('.fancybox-margin').removeClass('fancybox-margin');\n\n\t\t\t\tthis.el.removeClass('fancybox-lock');\n\n\t\t\t\tW.scrollTop( this.scrollV ).scrollLeft( this.scrollH );\n\t\t\t}\n\n\t\t\t$('.fancybox-overlay').remove().hide();\n\n\t\t\t$.extend(this, {\n\t\t\t\toverlay : null,\n\t\t\t\tfixed   : false\n\t\t\t});\n\t\t},\n\n\t\t// Private, callbacks\n\n\t\tupdate : function () {\n\t\t\tvar width = '100%', offsetWidth;\n\n\t\t\t// Reset width/height so it will not mess\n\t\t\tthis.overlay.width(width).height('100%');\n\n\t\t\t// jQuery does not return reliable result for IE\n\t\t\tif (IE) {\n\t\t\t\toffsetWidth = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);\n\n\t\t\t\tif (D.width() > offsetWidth) {\n\t\t\t\t\twidth = D.width();\n\t\t\t\t}\n\n\t\t\t} else if (D.width() > W.width()) {\n\t\t\t\twidth = D.width();\n\t\t\t}\n\n\t\t\tthis.overlay.width(width).height(D.height());\n\t\t},\n\n\t\t// This is where we can manipulate DOM, because later it would cause iframes to reload\n\t\tonReady : function (opts, obj) {\n\t\t\tvar overlay = this.overlay;\n\n\t\t\t$('.fancybox-overlay').stop(true, true);\n\n\t\t\tif (!overlay) {\n\t\t\t\tthis.create(opts);\n\t\t\t}\n\n\t\t\tif (opts.locked && this.fixed && obj.fixed) {\n\t\t\t\tobj.locked = this.overlay.append( obj.wrap );\n\t\t\t\tobj.fixed  = false;\n\t\t\t}\n\n\t\t\tif (opts.showEarly === true) {\n\t\t\t\tthis.beforeShow.apply(this, arguments);\n\t\t\t}\n\t\t},\n\n\t\tbeforeShow : function(opts, obj) {\n\t\t\tif (obj.locked && !this.el.hasClass('fancybox-lock')) {\n\t\t\t\tif (this.fixPosition !== false) {\n\t\t\t\t\t$('*').filter(function(){\n\t\t\t\t\t\treturn ($(this).css('position') === 'fixed' && !$(this).hasClass(\"fancybox-overlay\") && !$(this).hasClass(\"fancybox-wrap\") );\n\t\t\t\t\t}).addClass('fancybox-margin');\n\t\t\t\t}\n\n\t\t\t\tthis.el.addClass('fancybox-margin');\n\n\t\t\t\tthis.scrollV = W.scrollTop();\n\t\t\t\tthis.scrollH = W.scrollLeft();\n\n\t\t\t\tthis.el.addClass('fancybox-lock');\n\n\t\t\t\tW.scrollTop( this.scrollV ).scrollLeft( this.scrollH );\n\t\t\t}\n\n\t\t\tthis.open(opts);\n\t\t},\n\n\t\tonUpdate : function() {\n\t\t\tif (!this.fixed) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t},\n\n\t\tafterClose: function (opts) {\n\t\t\t// Remove overlay if exists and fancyBox is not opening\n\t\t\t// (e.g., it is not being open using afterClose callback)\n\t\t\tif (this.overlay && !F.coming) {\n\t\t\t\tthis.overlay.fadeOut(opts.speedOut, $.proxy( this.close, this ));\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n\t *\tTitle helper\n\t */\n\n\tF.helpers.title = {\n\t\tdefaults : {\n\t\t\ttype     : 'float', // 'float', 'inside', 'outside' or 'over',\n\t\t\tposition : 'bottom' // 'top' or 'bottom'\n\t\t},\n\n\t\tbeforeShow: function (opts) {\n\t\t\tvar current = F.current,\n\t\t\t\ttext    = current.title,\n\t\t\t\ttype    = opts.type,\n\t\t\t\ttitle,\n\t\t\t\ttarget;\n\n\t\t\tif ($.isFunction(text)) {\n\t\t\t\ttext = text.call(current.element, current);\n\t\t\t}\n\n\t\t\tif (!isString(text) || $.trim(text) === '') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttitle = $('<div class=\"fancybox-title fancybox-title-' + type + '-wrap\">' + text + '</div>');\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'inside':\n\t\t\t\t\ttarget = F.skin;\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'outside':\n\t\t\t\t\ttarget = F.wrap;\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'over':\n\t\t\t\t\ttarget = F.inner;\n\t\t\t\tbreak;\n\n\t\t\t\tdefault: // 'float'\n\t\t\t\t\ttarget = F.skin;\n\n\t\t\t\t\ttitle.appendTo('body');\n\n\t\t\t\t\tif (IE) {\n\t\t\t\t\t\ttitle.width( title.width() );\n\t\t\t\t\t}\n\n\t\t\t\t\ttitle.wrapInner('<span class=\"child\"></span>');\n\n\t\t\t\t\t//Increase bottom margin so this title will also fit into viewport\n\t\t\t\t\tF.current.margin[2] += Math.abs( getScalar(title.css('margin-bottom')) );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttitle[ (opts.position === 'top' ? 'prependTo'  : 'appendTo') ](target);\n\t\t}\n\t};\n\n\t// jQuery plugin initialization\n\t$.fn.fancybox = function (options) {\n\t\tvar index,\n\t\t\tthat     = $(this),\n\t\t\tselector = this.selector || '',\n\t\t\trun      = function(e) {\n\t\t\t\tvar what = $(this).blur(), idx = index, relType, relVal;\n\n\t\t\t\tif (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && !what.is('.fancybox-wrap')) {\n\t\t\t\t\trelType = options.groupAttr || 'data-fancybox-group';\n\t\t\t\t\trelVal  = what.attr(relType);\n\n\t\t\t\t\tif (!relVal) {\n\t\t\t\t\t\trelType = 'rel';\n\t\t\t\t\t\trelVal  = what.get(0)[ relType ];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (relVal && relVal !== '' && relVal !== 'nofollow') {\n\t\t\t\t\t\twhat = selector.length ? $(selector) : that;\n\t\t\t\t\t\twhat = what.filter('[' + relType + '=\"' + relVal + '\"]');\n\t\t\t\t\t\tidx  = what.index(this);\n\t\t\t\t\t}\n\n\t\t\t\t\toptions.index = idx;\n\n\t\t\t\t\t// Stop an event from bubbling if everything is fine\n\t\t\t\t\tif (F.open(what, options) !== false) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\toptions = options || {};\n\t\tindex   = options.index || 0;\n\n\t\tif (!selector || options.live === false) {\n\t\t\tthat.unbind('click.fb-start').bind('click.fb-start', run);\n\n\t\t} else {\n\t\t\tD.undelegate(selector, 'click.fb-start').delegate(selector + \":not('.fancybox-item, .fancybox-nav')\", 'click.fb-start', run);\n\t\t}\n\n\t\tthis.filter('[data-fancybox-start=1]').trigger('click');\n\n\t\treturn this;\n\t};\n\n\t// Tests that need a body at doc ready\n\tD.ready(function() {\n\t\tvar w1, w2;\n\n\t\tif ( $.scrollbarWidth === undefined ) {\n\t\t\t// http://benalman.com/projects/jquery-misc-plugins/#scrollbarwidth\n\t\t\t$.scrollbarWidth = function() {\n\t\t\t\tvar parent = $('<div style=\"width:50px;height:50px;overflow:auto\"><div/></div>').appendTo('body'),\n\t\t\t\t\tchild  = parent.children(),\n\t\t\t\t\twidth  = child.innerWidth() - child.height( 99 ).innerWidth();\n\n\t\t\t\tparent.remove();\n\n\t\t\t\treturn width;\n\t\t\t};\n\t\t}\n\n\t\tif ( $.support.fixedPosition === undefined ) {\n\t\t\t$.support.fixedPosition = (function() {\n\t\t\t\tvar elem  = $('<div style=\"position:fixed;top:20px;\"></div>').appendTo('body'),\n\t\t\t\t\tfixed = ( elem[0].offsetTop === 20 || elem[0].offsetTop === 15 );\n\n\t\t\t\telem.remove();\n\n\t\t\t\treturn fixed;\n\t\t\t}());\n\t\t}\n\n\t\t$.extend(F.defaults, {\n\t\t\tscrollbarWidth : $.scrollbarWidth(),\n\t\t\tfixed  : $.support.fixedPosition,\n\t\t\tparent : $('body')\n\t\t});\n\n\t\t//Get real width of page scroll-bar\n\t\tw1 = $(window).width();\n\n\t\tH.addClass('fancybox-lock-test');\n\n\t\tw2 = $(window).width();\n\n\t\tH.removeClass('fancybox-lock-test');\n\n\t\t$(\"<style type='text/css'>.fancybox-margin{margin-right:\" + (w2 - w1) + \"px;}</style>\").appendTo(\"head\");\n\t});\n\n}(window, document, jQuery));\n"]}